{{- if or .Values.nexusProperties .Values.database.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "nexus.fullname" . }}-nexus-properties
  labels:
    {{- include "nexus.labels" . | nindent 4 }}
data:
  {{ .Values.nexusPropertiesFilename }}: |
    {{- $db := include "nexus.databaseProperties" . | trim }}
    {{- $userProps := include "nexus.renderProperties" .Values.nexusProperties | trim }}
    {{- if $db }}
    {{ $db | nindent 4 }}
    {{- end }}
    {{- if and $db $userProps }}

    {{- end }}
    {{- if $userProps }}
    {{ $userProps | nindent 4 }}
    {{- end }}
{{- end }}
